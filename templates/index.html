<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Bootstrap Core CSS -->
    <!-- <link href="css/bootstrap.min.css" rel="stylesheet"> -->

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<title>Q-DEN</title>
<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>



<!-- For IE 9 and below. ICO should be 32x32 pixels in size -->
<!--[if IE]><link rel="shortcut icon" href="path/to/favicon.ico"><![endif]-->

<!-- Touch Icons - iOS and Android 2.1+ 180x180 pixels in size. --> 
<link rel="apple-touch-icon-precomposed" href="static/apple-touch-icon-precomposed.png">

<!-- Firefox, Chrome, Safari, IE 11+ and Opera. 196x196 pixels in size. -->
<link rel="icon" href="static/favicon.png">


    <!-- Custom CSS -->
    <style>
    html{
        position: relative;
        min-height: 100%
    }
   body {
  /* Margin bottom by footer height */
  margin-bottom: 60px;
  padding-top: 70px;
  background-image: url("static/background.png");

}
.footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  /* Set the fixed height of the footer here */
  height: 60px;
  background-color: #f5f5f5;
}
.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{
    font-family:inherit;
    font-weight:500;
    line-height:1.1;
    color:#163893}

.container-fliud {
  width: auto;
  max-width: 680px;
  padding: 0 15px;
}
.container .text-muted {
  margin: 20px 0;
}
sup{
    vertical-align: super;
    font-size: .4em;
}



    </style>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
   
    <!-- Page Content -->
    <div class="container">
        <img src="/static/logo.png" class="img-responsive" alt="Responsive image">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h1>Q-DEN<sup font-size="30%">[1]</sup></h1>
                    <!-- <p class="lead">Unit System : Imperial/Metric</p> -->



                    <h3 class="text-left">ASHRAE<sup>[2]</sup> Design Condition.</h3>
                </div>
            </div>

            <div role="tabpanel">
            
              <!-- Nav tabs -->
              <ul class="nav nav-tabs" role="tablist">
            
                <li role="presentation" class="active"><a href="#imperial" aria-controls="imperial" role="tab" data-toggle="tab">Imperial</a></li>
            
            
                <li role="presentation"><a href="#metric" aria-controls="metric" role="tab" data-toggle="tab">Metric</a></li>
            
              </ul>

              <!-- Tab panes -->
              <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="imperial">
                     <form onSubmit="submitImperial();return false;" action="#" >
                        <br>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Dry Bulb Temperature </label>
                            <input type="number" class="form-control" id="dryTempI" placeholder="Temperature in Farenheit" required step="any" min=40 max=130 >
                        </div>
                        <div class="form-group">
                            <label for="">Wet Bulb Temperature </label>
                            <input type="number" class="form-control" id="wetTempI" placeholder="Temperature in Fareheit" required step="any"

                            onchange="checkI()" min=30 max=95 >
                        </div>
                        <div>
                            <label>Elevation </label>
                            <input type="number" class="form-control" id="elevI" placeholder="Elevation in Ft." required  step="any"  min=-600 max=13000 >
                        </div>
                          <br>
                        <button type="submit" class="btn btn-primary">Calculate</button>
                    </form>
                    <div >
        <h2 class="text-center">Results</h2>
                    <div>
                        <label>Estimated Cooling Degree Hours</label>
                    <input name="coolingTime" class="form-control" id="cooltime" readonly="readonly" maxlength="30">

                    </div>           
                    <br>
                    <div>
                        <label>Number of Hours Percentage that
                                Could be Covered without DX<sup>[3]</sup> (IDEC only)</label>
                    <input name="echo" class="form-control" readonly="readonly" id="echo" maxlength="30">

                     </div> 
                     <br>   
                   <div>
                            <label>Hybrid SEER<sup>[4]</sup></label>
                            <input name="eer" class="form-control" readonly="readonly" maxlength="30" id="eer">
                   </div>       
                    <br>
                    <div>
                            <label>Consumption Saving<sup>[4]</sup></label>
                            <input name="consumtionsaving" id="csaving" readonly="readonly" maxlength="30" class="form-control"> 
                    </div>
                    <br>
                    <div>

                        <label>Peak Demand Saving<sup>[4]</sup></label>
                        <input name="demandsaving" id="dsaving"  readonly="readonly" maxlength="30" class="form-control">
                    </div>
                    <br>
                    <div>
                    <label>Water Consumption</label>
                    <input name="waterconsumption" id="water"  readonly="readonly" maxlength="30" class="form-control">

                    </div>

                    <br>
                    <br>
                    <div>
                    <h5 style="padding-top:10px;">For 100% Fresh Air Only Units(FAHU)</h5>
                    </div>
                    <div>
                    <label>DX size needed per internal load</label>
                    <input name="dx" id="dx"  readonly="readonly" maxlength="30" class="form-control">
                    </div>
                    <br>
                    <br></div>
                </div>
                <!-- Tab PAnel 2 -->
                <div role="tabpanel" class="tab-pane " id="metric">

                    <form onsubmit="submitMetric();return false;" action="#"> 
                        <br>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Dry Bulb Temperature</label>
                            <input type="number" class="form-control" id="dryTempM" placeholder="Temperature in Celsius" required step="any" min=4.44 max=54.44>
                        </div>
                        <div class="form-group">
                            <label for="">Wet Bulb Temperature</label>
                            <input type="number" class="form-control" id="wetTempM" placeholder="Temperature in Celsius" step="any" required min=-1.11 max=35 onchange="checkM()">
                        </div>
                        <div>
                            <label>Elevation</label>
                            <input type="number" class="form-control" id="elevM" placeholder="Elevation in Meters" step="any" required min=-182.88 max=3962.4>
                        </div>
                        <br>
                        <button type="submit" class="btn btn-primary" class="text-center">Calculate</button>
                    </form>
                    <div >
        <h3 class="text-center">Results</h3>
                    <div>
                        <label>Estimated Cooling Degree Hours</label>
                    <input name="coolingTime" class="form-control" id="cooltimeM" readonly="readonly" maxlength="30">

                    </div>           
                    <br>
                    <div>
                        <label>Number of Hours Percentage that
                                Could be Covered without DX <sup>[3]</sup> (IDEC only)</label>
                    <input name="echo"  class="form-control" readonly="readonly" id="echoM" maxlength="30">

                     </div>
                     <br>    
                   <div>
                            <label>Hybrid COP<sup>[4]</sup></label>
                            <input name="cop"  class="form-control" readonly="readonly" maxlength="30" id="cop">
                   </div>       
                   <br>
                    <div>
                            <label>Consumption Saving<sup>[4]</sup></label>
                            <input name="consumtionsaving" id="csavingM"  readonly="readonly" maxlength="30" class="form-control"> 
                    </div>
                    <br>
                    <div>

                        <label>Peak Demand Saving<sup>[4]</sup></label>
                        <input name="demandsaving" id="dsavingM" readonly="readonly" maxlength="30" class="form-control">
                    </div>
                    <br>
                    <div>
                    <label>Water Consumption</label>
                    <input name="waterconsumption" id="waterM" readonly="readonly" maxlength="30" class="form-control">

                    </div>
                    <br>
                    <br>
                    <div>
                    <h5 style="padding-top:10px;">For 100% Fresh Air Only Units(FAHU)</h5>
                    </div>
                    <div>
                    <label>DX size needed per internal load</label>
                    <input name="dx" id="dxM"  readonly="readonly" maxlength="30" class="form-control">
                    </div>
                    <br>
                    <br></div>
                </div>
            </div>
        </div>


    <!-- <textarea id="res"></textarea> -->

        <!-- /.row -->


</div>
    <footer class="footer">
      <div class="container-fliud">
        <div class="text-center">
        <p class="text-muted" ></p>
      </div>
  </div>
    </footer>


    <!-- /.container -->

    <!-- jQuery Version 1.11.1 -->

    <!-- Bootstrap Core JavaScript -->
    <script type="text/javascript">

    function fallbackM(){


        var dryTempM = Number(document.getElementById("dryTempM").value);
        var wetTempM =Number(document.getElementById("wetTempM").value);
        var elevM =  Number(document.getElementById("elevM").value);

        if (4.44 <= dryTempM &&  dryTempM <= 54.44 ){
                if(-1.11 <= wetTempM && wetTempM<= 35){
                    if( -182.88 <= elevM && elevM <= 3962.4) {
                        return true;

                    }
                    else{
                        alert('Elevation should be greater than -182.88 and smaller than 3962.4 Meters.');
                        return false;
                    }
                }
                else{
                    alert('Wet bulb Temperature should be greater than -1.11 and smaller than 35 Celsius.');
                    return false;
                }
        }
        else{
                alert('Dry bulb Temperature should be greater than 4.44 and smaller than 54.44 Celsius.');
                return false;
        }
    }


    function fallbackI(){

        var dryTempI = Number(document.getElementById("dryTempI").value);
        var wetTempI =Number(document.getElementById("wetTempI").value);
        var elevI = Number(document.getElementById("elevI").value);

                
        if (40 <= dryTempI && dryTempI <= 130 ){
            
                if(30 <= wetTempI  && wetTempI <=95){
                    if( -600 <= elevI && elevI <=13000) {
                        return true;

                    }
                    else{
                        alert('Elevation should be greater than -600 and smaller than 13000 Ft.');
                        return false;
                    }
                }
                else{
                    alert('Wet bulb Temperature should be greater than 30 and smaller than 95 Fareheit.');
                    return false;
                }
        }
        else{
                alert('Dry bulb Temperature should be greater than 40 and smaller than 130 Fareheit.');
                return false;
        }
    }




    function httpGet (url) {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET",url,false);
        xmlHttp.send();
        return xmlHttp.responseText
    }

    function parse(data){
        var res = data.split('}');
        res = res[0];
        res += '}';
        res = res.replace(/'/g,'"');
        return JSON.parse(res);
    }

    function checkI(){
        var dryTempI = Number(document.getElementById("dryTempI").value);
        var wetTempI = Number(document.getElementById("wetTempI").value);
        if (dryTempI >= wetTempI) {
            return true;
        }
        else{
        return alert("Wet Bulb Temperature should be equal or less than Dry Bulb Temperature.");
        }
    }

    function checkM(){
        var dryTempM = Number(document.getElementById("dryTempM").value);
        var wetTempM = Number(document.getElementById("wetTempM").value);
        if (dryTempM >= wetTempM) {
            return true;
        }
    else{
        return alert("Wet Bulb Temperature should be equal or less than Dry Bulb Temperature.");
        }
        
    }


    function submitImperial(){

        if (checkI() && fallbackI()) {
            var baseURL = "http://52.1.170.137/"
            var dryTempI = document.getElementById("dryTempI").value;
            var wetTempI =document.getElementById("wetTempI").value;
            var elevI = document.getElementById("elevI").value;
            var url = baseURL + dryTempI + '/' + wetTempI + '/' + elevI;
            // Make get request or dummy data
            var  response = httpGet(url);
            // var response = "{'total cooling hours': 3550.0093750000001, 'water consumption': 1.1110774428258261, 'EERH': 39.34550083759347, 'echo': 0.98308330838521163, 'demand saving': 0.49600372608927312, 'consumption saving': 0.66248550791851135, 'DX': 0.95097043736111875 },100,60,2000,0.983083308385,3550.009375,0.950970437361,39.3455008376,0.662485507919,0.496003726089,1.11107744283"

            var data = parse(response);
            document.getElementById("cooltime").value = (Math.round(data["total cooling hours"]) + '  Hours');
            document.getElementById("echo").value = (data["echo"]*100).toFixed(1) +' %';
            document.getElementById("eer").value = data["EERH"].toFixed(1);
            document.getElementById("csaving").value = (data["consumption saving"]*100).toFixed(1) + ' %';
            document.getElementById("dsaving").value = (data["demand saving"]*100).toFixed(1) + ' %';
            document.getElementById("water").value = data["water consumption"].toFixed(1) + ' G/Tr/Hr';
            document.getElementById("dx").value = (data["DX"]/5).toFixed(1) +' Ton/Ton';
 
        }
        else{
            //alert("Wet Bulb Temperature should be equal or less than Dry Bulb Temperature.");

        }

        
    }

    function submitMetric (){

        if (checkM() && fallbackM()){
            var baseURL = "http://52.1.170.137/"
            var dryTempM = document.getElementById("dryTempM").value;
            dryTempM = (dryTempM*1.8) + 32;
            var wetTempM = document.getElementById("wetTempM").value;
            wetTempM = (wetTempM*1.8) + 32;
            var elevM = (document.getElementById("elevM").value)/0.3048;
            var url = baseURL + dryTempM + '/' + wetTempM + '/' + elevM;

            var response = httpGet(url);
            // var response = "{'total cooling hours': 3550.0093750000001, 'water consumption': 1.1110774428258261, 'EERH': 39.34550083759347, 'echo': 0.98308330838521163, 'demand saving': 0.49600372608927312, 'consumption saving': 0.66248550791851135, 'DX': 0.95097043736111875 },100,60,2000,0.983083308385,3550.009375,0.950970437361,39.3455008376,0.662485507919,0.496003726089,1.11107744283"

            var data = parse(response);

            document.getElementById("cooltimeM").value = Math.round(data["total cooling hours"]) + ' Hours';
            document.getElementById("echoM").value = (data["echo"]*100).toFixed(1) + ' %';
            document.getElementById("cop").value = (data["EERH"]/3.413).toFixed(1) ;
            document.getElementById("csavingM").value = (data["consumption saving"]*100).toFixed(1) +' %';
            document.getElementById("dsavingM").value = (data["demand saving"]*100).toFixed(1) + ' %';
            document.getElementById("waterM").value = (data["water consumption"]*1.007).toFixed(1) + ' L/Kw/Hr';
            document.getElementById("dxM").value = (data["DX"]/5).toFixed(1) + ' Kw/Kw'

        }
        else{
            //alert("Wet Bulb Temperature should be equal or less than Dry Bulb Temperature.");

        }

    
    }

    </script>


</body>

</html>
